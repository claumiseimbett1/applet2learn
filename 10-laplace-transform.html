<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformada de Laplace - Herramienta Educativa</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            transition: all 0.3s;
            position: relative;
        }
        
        .tab.active {
            color: #667eea;
            font-weight: bold;
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }
        
        input[type="text"], select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .result-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
        }
        
        .plot-container {
            margin-top: 30px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }
        
        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .card h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .property-item {
            padding: 10px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .property-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .formula {
            font-family: 'Courier New', monospace;
            color: #333;
            margin: 5px 0;
        }
        
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .example-btn {
            padding: 8px 16px;
            margin: 5px;
            background: #e9ecef;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .example-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ Transformada de Laplace</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('calculator')">Calculadora</button>
            <button class="tab" onclick="showTab('visualizer')">Visualizador</button>
            <button class="tab" onclick="showTab('properties')">Propiedades</button>
            <button class="tab" onclick="showTab('table')">Tabla de Transformadas</button>
        </div>
        
        <!-- Tab Calculadora -->
        <div id="calculator" class="tab-content active">
            <div class="grid">
                <div class="card">
                    <h3>Transformada Directa</h3>
                    <div class="input-group">
                        <label>Funci√≥n f(t):</label>
                        <input type="text" id="directInput" placeholder="Ej: exp(-2*t) * sin(3*t)">
                    </div>
                    <div>
                        <button onclick="loadExample('direct', 'exp(-t)')">e^(-t)</button>
                        <button onclick="loadExample('direct', 'sin(2*t)')">sin(2t)</button>
                        <button onclick="loadExample('direct', 't^2')">t¬≤</button>
                        <button onclick="loadExample('direct', 'exp(-2*t)*cos(3*t)')">e^(-2t)cos(3t)</button>
                    </div>
                    <button onclick="calculateDirect()" style="margin-top: 15px; width: 100%;">
                        Calcular L{f(t)}
                    </button>
                    <div id="directResult" class="result-box" style="display: none;"></div>
                </div>
                
                <div class="card">
                    <h3>Transformada Inversa</h3>
                    <div class="input-group">
                        <label>Funci√≥n F(s):</label>
                        <input type="text" id="inverseInput" placeholder="Ej: 1/(s^2 + 4)">
                    </div>
                    <div>
                        <button onclick="loadExample('inverse', '1/s')">1/s</button>
                        <button onclick="loadExample('inverse', '1/(s^2+1)')">1/(s¬≤+1)</button>
                        <button onclick="loadExample('inverse', 's/(s^2+4)')">s/(s¬≤+4)</button>
                        <button onclick="loadExample('inverse', '1/(s*(s+1))')">1/(s(s+1))</button>
                    </div>
                    <button onclick="calculateInverse()" style="margin-top: 15px; width: 100%;">
                        Calcular L‚Åª¬π{F(s)}
                    </button>
                    <div id="inverseResult" class="result-box" style="display: none;"></div>
                </div>
            </div>
        </div>
        
        <!-- Tab Visualizador -->
        <div id="visualizer" class="tab-content">
            <div class="input-group">
                <label>Funci√≥n a visualizar f(t):</label>
                <input type="text" id="plotInput" placeholder="Ej: exp(-t) * sin(2*t)">
            </div>
            <button onclick="plotFunction()">Graficar f(t)</button>
            <button onclick="plotBoth()">Graficar f(t) y |F(s)|</button>
            <button onclick="plotROC()">Regi√≥n de Convergencia</button>
            <button onclick="plot3D()">Superficie 3D de F(s)</button>
            
            <div id="plotArea" class="plot-container"></div>
        </div>
        
        <!-- Tab Propiedades -->
        <div id="properties" class="tab-content">
            <div class="grid">
                <div class="card">
                    <h3>Propiedades B√°sicas</h3>
                    <div class="property-item" onclick="showProperty('linearity')">
                        <strong>Linealidad</strong>
                        <div class="formula">L{af(t) + bg(t)} = aF(s) + bG(s)</div>
                    </div>
                    <div class="property-item" onclick="showProperty('shifting')">
                        <strong>Desplazamiento en tiempo</strong>
                        <div class="formula">L{f(t-a)u(t-a)} = e^(-as)F(s)</div>
                    </div>
                    <div class="property-item" onclick="showProperty('scaling')">
                        <strong>Escalamiento</strong>
                        <div class="formula">L{f(at)} = (1/a)F(s/a)</div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Propiedades Avanzadas</h3>
                    <div class="property-item" onclick="showProperty('derivative')">
                        <strong>Derivada</strong>
                        <div class="formula">L{f'(t)} = sF(s) - f(0)</div>
                    </div>
                    <div class="property-item" onclick="showProperty('integral')">
                        <strong>Integral</strong>
                        <div class="formula">L{‚à´f(œÑ)dœÑ} = F(s)/s</div>
                    </div>
                    <div class="property-item" onclick="showProperty('convolution')">
                        <strong>Convoluci√≥n</strong>
                        <div class="formula">L{f*g} = F(s)¬∑G(s)</div>
                    </div>
                </div>
            </div>
            
            <div id="propertyDetail" class="result-box" style="display: none; margin-top: 20px;"></div>
        </div>
        
        <!-- Tab Tabla -->
        <div id="table" class="tab-content">
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>f(t)</th>
                            <th>F(s) = L{f(t)}</th>
                            <th>Regi√≥n de Convergencia</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>1/s</td>
                            <td>Re(s) > 0</td>
                        </tr>
                        <tr>
                            <td>t</td>
                            <td>1/s¬≤</td>
                            <td>Re(s) > 0</td>
                        </tr>
                        <tr>
                            <td>t^n</td>
                            <td>n!/s^(n+1)</td>
                            <td>Re(s) > 0</td>
                        </tr>
                        <tr>
                            <td>e^(at)</td>
                            <td>1/(s-a)</td>
                            <td>Re(s) > a</td>
                        </tr>
                        <tr>
                            <td>sin(œât)</td>
                            <td>œâ/(s¬≤+œâ¬≤)</td>
                            <td>Re(s) > 0</td>
                        </tr>
                        <tr>
                            <td>cos(œât)</td>
                            <td>s/(s¬≤+œâ¬≤)</td>
                            <td>Re(s) > 0</td>
                        </tr>
                        <tr>
                            <td>e^(at)sin(œât)</td>
                            <td>œâ/((s-a)¬≤+œâ¬≤)</td>
                            <td>Re(s) > a</td>
                        </tr>
                        <tr>
                            <td>e^(at)cos(œât)</td>
                            <td>(s-a)/((s-a)¬≤+œâ¬≤)</td>
                            <td>Re(s) > a</td>
                        </tr>
                        <tr>
                            <td>t¬∑e^(at)</td>
                            <td>1/(s-a)¬≤</td>
                            <td>Re(s) > a</td>
                        </tr>
                        <tr>
                            <td>sinh(at)</td>
                            <td>a/(s¬≤-a¬≤)</td>
                            <td>Re(s) > |a|</td>
                        </tr>
                        <tr>
                            <td>cosh(at)</td>
                            <td>s/(s¬≤-a¬≤)</td>
                            <td>Re(s) > |a|</td>
                        </tr>
                        <tr>
                            <td>Œ¥(t)</td>
                            <td>1</td>
                            <td>Toda s</td>
                        </tr>
                        <tr>
                            <td>u(t)</td>
                            <td>1/s</td>
                            <td>Re(s) > 0</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        // Transformadas conocidas con ROC
        const knownTransforms = {
            '1': { transform: '1/s', roc: 0 },
            't': { transform: '1/s^2', roc: 0 },
            't^2': { transform: '2/s^3', roc: 0 },
            't^3': { transform: '6/s^4', roc: 0 },
            'exp(-t)': { transform: '1/(s+1)', roc: -1 },
            'exp(t)': { transform: '1/(s-1)', roc: 1 },
            'exp(-2*t)': { transform: '1/(s+2)', roc: -2 },
            'exp(2*t)': { transform: '1/(s-2)', roc: 2 },
            'sin(t)': { transform: '1/(s^2+1)', roc: 0 },
            'cos(t)': { transform: 's/(s^2+1)', roc: 0 },
            'sin(2*t)': { transform: '2/(s^2+4)', roc: 0 },
            'cos(2*t)': { transform: 's/(s^2+4)', roc: 0 },
            'sin(3*t)': { transform: '3/(s^2+9)', roc: 0 },
            'cos(3*t)': { transform: 's/(s^2+9)', roc: 0 },
            'sinh(t)': { transform: '1/(s^2-1)', roc: 1 },
            'cosh(t)': { transform: 's/(s^2-1)', roc: 1 },
            'exp(-t)*sin(t)': { transform: '1/((s+1)^2+1)', roc: -1 },
            'exp(-t)*cos(t)': { transform: '(s+1)/((s+1)^2+1)', roc: -1 },
            'exp(-2*t)*sin(3*t)': { transform: '3/((s+2)^2+9)', roc: -2 },
            'exp(-2*t)*cos(3*t)': { transform: '(s+2)/((s+2)^2+9)', roc: -2 },
            't*exp(-t)': { transform: '1/(s+1)^2', roc: -1 },
            'u(t)': { transform: '1/s', roc: 0 },
            'delta(t)': { transform: '1', roc: -Infinity }
        };
        
        const inverseTransforms = {
            '1/s': '1',
            '1/s^2': 't',
            '2/s^3': 't¬≤',
            '6/s^4': 't¬≥',
            '1/(s+1)': 'e^(-t)',
            '1/(s-1)': 'e^t',
            '1/(s+2)': 'e^(-2t)',
            '1/(s^2+1)': 'sin(t)',
            's/(s^2+1)': 'cos(t)',
            '2/(s^2+4)': 'sin(2t)',
            's/(s^2+4)': 'cos(2t)',
            '3/(s^2+9)': 'sin(3t)',
            's/(s^2+9)': 'cos(3t)',
            '1/(s^2-1)': 'sinh(t)',
            's/(s^2-1)': 'cosh(t)',
            '1/((s+1)^2+1)': 'e^(-t)¬∑sin(t)',
            '(s+1)/((s+1)^2+1)': 'e^(-t)¬∑cos(t)',
            '1/(s*(s+1))': '1 - e^(-t)',
            '1/(s+1)^2': 't¬∑e^(-t)'
        };
        
        function showTab(tabName) {
            // Ocultar todos los tabs
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar el tab seleccionado
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        function loadExample(type, value) {
            if (type === 'direct') {
                document.getElementById('directInput').value = value;
            } else {
                document.getElementById('inverseInput').value = value;
            }
        }
        
        function calculateDirect() {
            const input = document.getElementById('directInput').value.trim();
            const resultDiv = document.getElementById('directResult');
            
            if (!input) {
                alert('Por favor ingrese una funci√≥n');
                return;
            }
            
            // Buscar en transformadas conocidas
            let transformData = knownTransforms[input];
            let result, roc;
            
            if (transformData) {
                result = transformData.transform;
                roc = transformData.roc;
            } else {
                // Intentar reconocer patrones comunes
                if (input.includes('exp') && input.includes('sin')) {
                    result = 'Usar propiedad de desplazamiento: L{e^(at)f(t)} = F(s-a)';
                    roc = 'Determinado por el exponencial';
                } else if (input.includes('exp') && input.includes('cos')) {
                    result = 'Usar propiedad de desplazamiento: L{e^(at)f(t)} = F(s-a)';
                    roc = 'Determinado por el exponencial';
                } else if (input.startsWith('t*')) {
                    result = 'Usar propiedad de multiplicaci√≥n por t: L{t¬∑f(t)} = -dF/ds';
                    roc = 'Igual que f(t)';
                } else {
                    result = 'Funci√≥n no encontrada en la base de datos. Intente descomponer usando propiedades de linealidad.';
                    roc = 'No determinado';
                }
            }
            
            let rocText = roc !== undefined && roc !== 'No determinado' 
                ? (roc === -Infinity ? 'Todo el plano s' : `Re(s) > ${roc}`)
                : roc;
            
            resultDiv.innerHTML = `
                <strong>L{${input}} = ${result}</strong>
                <br><br>
                <em>Regi√≥n de convergencia: ${rocText}</em>
            `;
            resultDiv.style.display = 'block';
        }
        
        function calculateInverse() {
            const input = document.getElementById('inverseInput').value.trim();
            const resultDiv = document.getElementById('inverseResult');
            
            if (!input) {
                alert('Por favor ingrese una funci√≥n');
                return;
            }
            
            // Buscar en transformadas inversas conocidas
            let result = inverseTransforms[input];
            
            if (!result) {
                // Intentar fracciones parciales
                if (input.includes('/') && input.includes('*')) {
                    result = 'Usar fracciones parciales para descomponer';
                } else {
                    result = 'Funci√≥n no encontrada. Intente usar fracciones parciales o tabla de transformadas.';
                }
            }
            
            resultDiv.innerHTML = `
                <strong>L‚Åª¬π{${input}} = ${result}</strong>
                <br><br>
                <em>V√°lido para t ‚â• 0</em>
            `;
            resultDiv.style.display = 'block';
        }
        
        function plotFunction() {
            const input = document.getElementById('plotInput').value || 'exp(-t)*sin(2*t)';
            
            try {
                // Generar datos para la gr√°fica
                const t = [];
                const y = [];
                
                for (let i = 0; i <= 10; i += 0.1) {
                    t.push(i);
                    // Evaluar la funci√≥n
                    const expr = input.replace(/t/g, i).replace(/exp/g, 'Math.exp')
                                     .replace(/sin/g, 'Math.sin').replace(/cos/g, 'Math.cos')
                                     .replace(/\^/g, '**');
                    y.push(eval(expr));
                }
                
                const trace = {
                    x: t,
                    y: y,
                    type: 'scatter',
                    mode: 'lines',
                    name: 'f(t)',
                    line: {
                        color: '#667eea',
                        width: 3
                    }
                };
                
                const layout = {
                    title: `f(t) = ${input}`,
                    xaxis: { title: 't', gridcolor: '#e0e0e0' },
                    yaxis: { title: 'f(t)', gridcolor: '#e0e0e0' },
                    plot_bgcolor: '#f8f9fa',
                    paper_bgcolor: 'white',
                    font: { size: 14 }
                };
                
                Plotly.newPlot('plotArea', [trace], layout);
                
            } catch (error) {
                alert('Error al evaluar la funci√≥n. Verifique la sintaxis.');
            }
        }
        
        function plotBoth() {
            const input = document.getElementById('plotInput').value || 'exp(-t)*sin(2*t)';
            
            try {
                // Datos para f(t)
                const t = [];
                const ft = [];
                
                for (let i = 0; i <= 10; i += 0.1) {
                    t.push(i);
                    const expr = input.replace(/t/g, i).replace(/exp/g, 'Math.exp')
                                     .replace(/sin/g, 'Math.sin').replace(/cos/g, 'Math.cos')
                                     .replace(/\^/g, '**');
                    ft.push(eval(expr));
                }
                
                // Datos simulados para |F(s)|
                const s = [];
                const Fs = [];
                
                for (let i = 0.1; i <= 10; i += 0.1) {
                    s.push(i);
                    // Simulaci√≥n simplificada de la magnitud de F(s)
                    Fs.push(1 / (i * Math.sqrt(1 + i*i)));
                }
                
                const trace1 = {
                    x: t,
                    y: ft,
                    type: 'scatter',
                    mode: 'lines',
                    name: 'f(t)',
                    line: { color: '#667eea', width: 3 },
                    xaxis: 'x',
                    yaxis: 'y'
                };
                
                const trace2 = {
                    x: s,
                    y: Fs,
                    type: 'scatter',
                    mode: 'lines',
                    name: '|F(s)|',
                    line: { color: '#764ba2', width: 3 },
                    xaxis: 'x2',
                    yaxis: 'y2'
                };
                
                const layout = {
                    title: 'Funci√≥n en dominio del tiempo y frecuencia',
                    grid: {rows: 1, columns: 2},
                    xaxis: { title: 't', domain: [0, 0.45], gridcolor: '#e0e0e0' },
                    yaxis: { title: 'f(t)', gridcolor: '#e0e0e0' },
                    xaxis2: { title: 's', domain: [0.55, 1], gridcolor: '#e0e0e0' },
                    yaxis2: { title: '|F(s)|', anchor: 'x2', gridcolor: '#e0e0e0' },
                    plot_bgcolor: '#f8f9fa',
                    paper_bgcolor: 'white',
                    showlegend: true,
                    font: { size: 14 }
                };
                
                Plotly.newPlot('plotArea', [trace1, trace2], layout);
                
            } catch (error) {
                alert('Error al evaluar la funci√≥n. Verifique la sintaxis.');
            }
        }
        
        function plotROC() {
            const input = document.getElementById('plotInput').value || 'exp(-t)*sin(2*t)';
            
            // Determinar ROC basado en la funci√≥n
            let transformData = knownTransforms[input];
            let rocValue = transformData ? transformData.roc : 0;
            
            // Si no se encuentra, usar valores por defecto seg√∫n patrones
            if (!transformData) {
                // Para exp(-at) donde a > 0, ROC es Re(s) > -a
                if (input.includes('exp(-') && input.match(/exp\(-(\d*\.?\d*)\*?t\)/)) {
                    const match = input.match(/exp\(-(\d*\.?\d*)\*?t\)/);
                    const a = parseFloat(match[1]) || 1;
                    rocValue = -a; // ROC: Re(s) > -a
                }
                // Para exp(at) donde a > 0, ROC es Re(s) > a  
                else if (input.includes('exp(') && input.match(/exp\((\d*\.?\d*)\*?t\)/)) {
                    const match = input.match(/exp\((\d*\.?\d*)\*?t\)/);
                    const a = parseFloat(match[1]) || 1;
                    rocValue = a; // ROC: Re(s) > a
                }
                // Para funciones trigonom√©tricas puras
                else if (input.includes('sin') || input.includes('cos')) {
                    rocValue = 0; // ROC: Re(s) > 0
                }
                // Para funciones combinadas exp(-at)*sin(wt) o exp(-at)*cos(wt)
                else if (input.includes('exp(-') && (input.includes('sin') || input.includes('cos'))) {
                    const expMatch = input.match(/exp\(-(\d*\.?\d*)\*?t\)/);
                    if (expMatch) {
                        const a = parseFloat(expMatch[1]) || 1;
                        rocValue = -a; // ROC dominada por la exponencial: Re(s) > -a
                    } else {
                        rocValue = 0;
                    }
                }
                // Para funciones combinadas exp(at)*sin(wt) o exp(at)*cos(wt)
                else if (input.includes('exp(') && !input.includes('exp(-') && (input.includes('sin') || input.includes('cos'))) {
                    const expMatch = input.match(/exp\((\d*\.?\d*)\*?t\)/);
                    if (expMatch) {
                        const a = parseFloat(expMatch[1]) || 1;
                        rocValue = a; // ROC: Re(s) > a
                    } else {
                        rocValue = 0;
                    }
                }
                // Para polinomios en t (t, t^2, etc.)
                else if (input.includes('t^') || input === 't') {
                    rocValue = 0; // ROC: Re(s) > 0
                }
                // Para la funci√≥n escal√≥n u(t) o constante
                else if (input === '1' || input.includes('u(t)')) {
                    rocValue = 0; // ROC: Re(s) > 0
                }
            }
            
            // Crear el plano complejo para mostrar la ROC
            const sigma = [];
            const omega = [];
            const rocRegion = [];
            
            for (let s = -10; s <= 10; s += 0.2) {
                for (let o = -10; o <= 10; o += 0.2) {
                    sigma.push(s);
                    omega.push(o);
                    // ROC: Re(s) > rocValue
                    rocRegion.push(s > rocValue ? 1 : 0);
                }
            }
            
            const trace = {
                x: sigma,
                y: omega,
                z: rocRegion,
                type: 'heatmap',
                colorscale: [
                    [0, '#ffcccc'],
                    [1, '#667eea']
                ],
                showscale: true,
                colorbar: {
                    title: 'ROC',
                    tickvals: [0, 1],
                    ticktext: ['Diverge', 'Converge']
                }
            };
            
            const layout = {
                title: `Regi√≥n de Convergencia para ${input}<br>Re(s) > ${rocValue}`,
                xaxis: { 
                    title: 'œÉ = Re(s)', 
                    gridcolor: '#e0e0e0',
                    range: [-10, 10]
                },
                yaxis: { 
                    title: 'œâ = Im(s)', 
                    gridcolor: '#e0e0e0',
                    range: [-10, 10]
                },
                plot_bgcolor: '#f8f9fa',
                paper_bgcolor: 'white',
                font: { size: 14 }
            };
            
            // Agregar l√≠nea vertical en Re(s) = rocValue
            const shapes = [{
                type: 'line',
                x0: rocValue,
                x1: rocValue,
                y0: -10,
                y1: 10,
                line: {
                    color: '#ff6b6b',
                    width: 3,
                    dash: 'dash'
                }
            }];
            
            layout.shapes = shapes;
            
            Plotly.newPlot('plotArea', [trace], layout);
        }
        
        function plot3D() {
            const input = document.getElementById('plotInput').value || 'exp(-t)*sin(2*t)';
            
            // Crear una superficie 3D simplificada de |F(s)|
            const sigma = [];
            const omega = [];
            const magnitude = [];
            
            for (let s = -5; s <= 5; s += 0.3) {
                const sigmaRow = [];
                const magRow = [];
                for (let o = -5; o <= 5; o += 0.3) {
                    sigmaRow.push(o);
                    // Simulaci√≥n simplificada de |F(s)| para diferentes funciones
                    let mag;
                    if (input.includes('exp(-t)') && input.includes('sin')) {
                        // Para exp(-t)*sin(wt): |F(s)| = w/sqrt((s+1)^2 + w^2)
                        const w = 2; // frecuencia asumida
                        mag = w / Math.sqrt(Math.pow(s + 1, 2) + Math.pow(o, 2) + Math.pow(w, 2));
                    } else if (input.includes('sin')) {
                        // Para sin(wt): |F(s)| = w/sqrt(s^2 + w^2)
                        const w = 1;
                        mag = w / Math.sqrt(Math.pow(s, 2) + Math.pow(o, 2) + Math.pow(w, 2));
                    } else {
                        // Por defecto: 1/(s^2 + w^2)
                        mag = 1 / Math.sqrt(Math.pow(s, 2) + Math.pow(o, 2) + 1);
                    }
                    magRow.push(mag);
                }
                sigma.push(sigmaRow);
                magnitude.push(magRow);
            }
            
            // Crear grilla para omega
            for (let o = -5; o <= 5; o += 0.3) {
                const omegaRow = [];
                for (let s = -5; s <= 5; s += 0.3) {
                    omegaRow.push(o);
                }
                omega.push(omegaRow);
            }
            
            const trace = {
                x: sigma,
                y: omega,
                z: magnitude,
                type: 'surface',
                colorscale: 'Viridis',
                colorbar: {
                    title: '|F(s)|'
                }
            };
            
            const layout = {
                title: `Superficie 3D de |F(s)| para ${input}`,
                scene: {
                    xaxis: { title: 'œÉ = Re(s)' },
                    yaxis: { title: 'œâ = Im(s)' },
                    zaxis: { title: '|F(s)|' },
                    camera: {
                        eye: { x: 1.5, y: 1.5, z: 1.5 }
                    }
                },
                paper_bgcolor: 'white',
                font: { size: 14 }
            };
            
            Plotly.newPlot('plotArea', [trace], layout);
        }

        function showProperty(property) {
            const details = {
                'linearity': `
                    <h4>Propiedad de Linealidad</h4>
                    <p>Si L{f(t)} = F(s) y L{g(t)} = G(s), entonces:</p>
                    <p><strong>L{af(t) + bg(t)} = aF(s) + bG(s)</strong></p>
                    <p>Ejemplo: L{3e^(-t) + 2sin(t)} = 3/(s+1) + 2/(s¬≤+1)</p>
                `,
                'shifting': `
                    <h4>Desplazamiento en el Tiempo</h4>
                    <p>Si L{f(t)} = F(s), entonces:</p>
                    <p><strong>L{f(t-a)u(t-a)} = e^(-as)F(s)</strong></p>
                    <p>Donde u(t-a) es la funci√≥n escal√≥n unitario.</p>
                    <p>Ejemplo: L{sin(t-œÄ/2)u(t-œÄ/2)} = e^(-œÄs/2)¬∑1/(s¬≤+1)</p>
                `,
                'scaling': `
                    <h4>Escalamiento en el Tiempo</h4>
                    <p>Si L{f(t)} = F(s), entonces:</p>
                    <p><strong>L{f(at)} = (1/a)F(s/a)</strong> para a > 0</p>
                    <p>Ejemplo: L{sin(2t)} = (1/2)¬∑(s/2)/((s/2)¬≤+1) = 2/(s¬≤+4)</p>
                `,
                'derivative': `
                    <h4>Transformada de la Derivada</h4>
                    <p>Si L{f(t)} = F(s), entonces:</p>
                    <p><strong>L{f'(t)} = sF(s) - f(0)</strong></p>
                    <p><strong>L{f''(t)} = s¬≤F(s) - sf(0) - f'(0)</strong></p>
                    <p>√ötil para resolver ecuaciones diferenciales.</p>
                `,
                'integral': `
                    <h4>Transformada de la Integral</h4>
                    <p>Si L{f(t)} = F(s), entonces:</p>
                    <p><strong>L{‚à´‚ÇÄ·µó f(œÑ)dœÑ} = F(s)/s</strong></p>
                    <p>Ejemplo: L{‚à´‚ÇÄ·µó e^(-œÑ)dœÑ} = 1/(s(s+1))</p>
                `,
                'convolution': `
                    <h4>Teorema de Convoluci√≥n</h4>
                    <p>Si L{f(t)} = F(s) y L{g(t)} = G(s), entonces:</p>
                    <p><strong>L{(f * g)(t)} = F(s)¬∑G(s)</strong></p>
                    <p>Donde (f * g)(t) = ‚à´‚ÇÄ·µó f(œÑ)g(t-œÑ)dœÑ</p>
                    <p>Muy √∫til para an√°lisis de sistemas LTI.</p>
                `
            };
            
            const detailDiv = document.getElementById('propertyDetail');
            detailDiv.innerHTML = details[property];
            detailDiv.style.display = 'block';
        }
        
    </script>
</body>
</html> 